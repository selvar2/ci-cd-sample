# Quick Start Guide

## ğŸ“‹ 5-Minute Setup

### 1. Create Local Branches
```bash
git branch test
git branch dev
git branch branch-1
git branch branch-2
git push origin test dev branch-1 branch-2
```

### 2. Test the Pipeline
```bash
git checkout branch-1
git push origin branch-1
```

Go to **Actions** tab â†’ Watch workflow execute through all 6 stages âœ“

### 3. View Results
- Check "Actions" tab for workflow status
- Expand each stage to see detailed logs
- Download build artifacts

---

## ğŸ”„ Development Workflow

### Starting a Feature
```bash
git checkout dev
git pull origin dev
git checkout -b branch-name
# Make changes
git add .
git commit -m "description"
git push origin branch-name
```

### Creating a Pull Request
1. Go to GitHub repo
2. Click "Compare & pull request"
3. Set **Base: dev**, **Compare: branch-name**
4. Add description â†’ Request reviewer
5. After approval â†’ Merge with "Create merge commit"

### Promoting to Production
```
Feature Branch â†’ dev (auto-deploy)
    â†“ (PR + Review)
dev â†’ test (auto-deploy to staging)
    â†“ (PR + Review)
test â†’ main (auto-deploy to production)
    â†“
âœ“ Live in production
```

---

## ğŸ“Š Pipeline Stages (In Order)

| Stage | Purpose | Time | Key Output |
|-------|---------|------|-----------|
| 1ï¸âƒ£ **Detect** | Identify branch type | ~10s | Branch flags |
| 2ï¸âƒ£ **Build** | Validate & package | ~15s | Build artifacts |
| 3ï¸âƒ£ **Test** | Quality checks | ~20s | Lint results |
| 4ï¸âƒ£ **Gates** | Enforce rules | ~5s | Approval status |
| 5ï¸âƒ£ **Deploy** | Upload to server | ~30s | Deployment log |
| 6ï¸âƒ£ **Summary** | Final report | ~5s | Status summary |

**Total Time**: ~1-2 minutes per push

---

## ğŸŒ¿ Branch Reference

| Branch | Purpose | Deploy To | Triggered By |
|--------|---------|-----------|--------------|
| `main` | ğŸ”´ Production | `/var/www/html/` | PR from test |
| `test` | ğŸŸ  Staging | `/var/www/test/` | PR from dev |
| `dev` | ğŸŸ¡ Integration | `/var/www/dev/` | PR from feature |
| `branch-*` | ğŸŸ¢ Feature | `/var/www/features/{branch}/` | Any push |

---

## âš™ï¸ Configuration

### GitHub Secrets (For Real Deployments)
```
Settings â†’ Secrets and variables â†’ Actions
â”œâ”€â”€ DEPLOY_HOST    (e.g., 192.168.1.100)
â”œâ”€â”€ DEPLOY_USER    (e.g., deploy-user)
â””â”€â”€ DEPLOY_KEY     (Private SSH key)
```

### Branch Protection (main only)
```
Settings â†’ Branches â†’ Add rule
â”œâ”€â”€ Branch name pattern: main
â”œâ”€â”€ âœ… Require pull request reviews (1)
â”œâ”€â”€ âœ… Require status checks to pass
â””â”€â”€ âœ… Dismiss stale reviews
```

---

## ğŸ› Troubleshooting

### Build Failed?
1. Go to **Actions** â†’ Click failed run
2. Expand "Build & Validate" stage
3. Look for error message
4. Fix code locally and push again

### JavaScript Syntax Error?
```bash
# Test locally
node -c src/app.js

# Fix any errors, then:
git add .
git commit -m "fix: JS syntax"
git push
```

### Deployment Not Working?
- Check GitHub Secrets are set correctly
- Verify SSH key has 600 permissions
- Test SSH connection: `ssh -i key.pem user@host`

---

## ğŸ“ File Structure

```
ci-cd-sample/
â”œâ”€â”€ .github/workflows/ci-cd.yml    â† Main pipeline (DO NOT EDIT)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.html                 â† Edit this (HTML template)
â”‚   â”œâ”€â”€ styles.css                 â† Edit this (CSS styles)
â”‚   â””â”€â”€ app.js                     â† Edit this (JavaScript logic)
â”œâ”€â”€ build/                         â† Generated by pipeline
â””â”€â”€ README.md                      â† Full documentation
```

---

## ğŸ¯ Common Tasks

### Add New Feature Branch
```bash
git checkout dev
git checkout -b feature/new-feature
git push origin feature/new-feature
```

### Promote Dev to Test
```bash
# On GitHub UI:
1. Click "New pull request"
2. Base: test | Compare: dev
3. Request review
4. Merge after approval
```

### Emergency Rollback
```bash
git revert -m 1 <commit-hash>
git push origin main
# Pipeline auto-deploys previous version
```

### View Workflow Logs
```bash
# CLI method
gh run list --branch dev
gh run view <run-id> --log
```

---

## ğŸ“š Key Resources

- **Workflow File**: [.github/workflows/ci-cd.yml](.github/workflows/ci-cd.yml)
- **Full Docs**: [README.md](README.md)
- **GitHub Actions**: https://docs.github.com/en/actions
- **Git Branching**: https://nvie.com/posts/a-successful-git-branching-model/

---

## âœ… Checklist

- [ ] Clone repo locally
- [ ] Create all branches (test, dev, branch-1, branch-2)
- [ ] Push first commit to branch-1
- [ ] Watch Actions run to completion
- [ ] Download build artifacts
- [ ] Read through workflow file
- [ ] Configure branch protection on main
- [ ] (Optional) Add deployment secrets
- [ ] Practice creating a PR from branch to dev

---

**Need help?** Check the full [README.md](README.md) for detailed information!
